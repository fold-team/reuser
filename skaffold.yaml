apiVersion: skaffold/v4beta3
kind: Config
metadata:
  name: reuser
build:
  artifacts:
  - image: reuser
    docker:
      dockerfile: Dockerfile
      target: dev
    sync:
      manual:
      - src: 'src/**/*.ts'
        dest: .
      - src: 'src/**/*.tsx'
        dest: .
      - src: 'src/**/*.css'
        dest: .
      - src: 'public/**/*'
        dest: .
manifests:
  helm:
    releases:
    - name: reuser
      chartPath: k8s/chart
      valuesFiles:
      - k8s/chart/values.yaml
portForward:
- resourceType: service
  resourceName: reuser
  port: 3000
  localPort: 3000

profiles:
- name: production
  build:
    artifacts:
    - image: reuser
      docker:
        dockerfile: Dockerfile
        target: runner
